(this["webpackJsonplucis-react"]=this["webpackJsonplucis-react"]||[]).push([[0],{32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(12),i=a.n(n),s=a(1);var l=function(){return Object(s.jsxs)("div",{id:"header",children:[Object(s.jsx)("h1",{children:"Cat Facts"}),Object(s.jsx)("h2",{children:"Lucis - React Tutorial"})]})},o=a(13),d=a(14),g=a(5),h=a(18),u=a(17);var j=function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{id:"facts-container",children:[" ",e.error&&Object(s.jsx)("div",{className:"fact-div",children:Object(s.jsx)("h3",{className:"loading",children:e.error})}),e.renderAllFacts]})})},b=a(6);var m=function(e){var t=e.state.apiPaging.slice(1,-1).map((function(t,a){return Object(s.jsx)(b.b,{to:"/page/".concat(t.label),children:Object(s.jsx)("button",{id:t.label,className:(t.active?"mark-page":"")+" "+(null===t.url?"remove-btn":""),onClick:e.handleClick,children:t.label},a)},a)}));return Object(s.jsxs)("div",{id:"paging",children:[Object(s.jsx)("div",{id:"page-nums",children:t}),Object(s.jsxs)("div",{id:"move-btns",children:[Object(s.jsx)(b.b,{to:"/page/".concat(e.currentPage-1),children:Object(s.jsx)("button",{id:"back-btn",className:1===e.currentPage?"hide":" ",onClick:function(){return e.data.moveClick(-1)},children:Object(s.jsx)("p",{children:"Back"})})}),Object(s.jsx)("button",{id:"randomize",onClick:e.data.randomize,children:Object(s.jsx)("p",{children:"Randomize Facts"})}),Object(s.jsx)(b.b,{to:"/page/".concat(e.currentPage+1),children:Object(s.jsx)("button",{id:"next-btn",className:e.lastPage===e.currentPage?"hide":" ",onClick:function(){return e.data.moveClick(1)},children:Object(s.jsx)("p",{children:"Next"})})})]})]})},p=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={isLoading:!0,allFacts:[],currentPage:localStorage.getItem("currentPage")||1,factsPerPage:15,error:null,apiPaging:[],newPageUrl:null},e.handleClick=e.handleClick.bind(Object(g.a)(e)),e.moveClick=e.moveClick.bind(Object(g.a)(e)),e.randomize=e.randomize.bind(Object(g.a)(e)),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("currentPage");window.history.pushState(null,"","/#/react-tutorial/page/"+this.state.currentPage),0===localStorage.length?(localStorage.setItem("currentPage",1),this.setState({currentPage:1}),this.fetchApi(e)):this.setState({isLoading:!1,allFacts:JSON.parse(localStorage.getItem("allFacts"))||[],currentPage:localStorage.getItem("currentPage")||1,apiPaging:JSON.parse(localStorage.getItem("apiPaging"))||[]})}},{key:"componentDidUpdate",value:function(e,t,a){if(e&&e.match.params.id!==this.props.match.params.id){var c=this.props.match.params.id;localStorage.setItem("currentPage",c),this.setState({currentPage:c}),this.fetchApi(c)}}},{key:"fetchApi",value:function(e){var t=this;fetch("https://catfact.ninja/facts?limit=15&page="+e).then((function(e){if(!e.ok)throw localStorage.removeItem("currentPage"),localStorage.removeItem("allFacts"),t.setState({allFacts:[]}),Error("Oh no! There was an error fetching the facts.");return e.json()})).then((function(e){var a=e.data,c=e.last_page,r=e.links,n=localStorage.getItem("currentPage");localStorage.setItem("allFacts",JSON.stringify(a)),localStorage.setItem("apiPaging",JSON.stringify(r)),localStorage.setItem("currentPage",Number(n)),t.setState({isLoading:!1,allFacts:a,currentPage:JSON.parse(localStorage.getItem("currentPage"))||1,error:null,lastPage:c,apiPaging:r})})).catch((function(e){t.setState({error:e.message,isLoading:!1})}))}},{key:"handleClick",value:function(e){if(window.scrollTo({top:0,behavior:"smooth"}),e.target.id>=1){var t=Number(e.target.id);localStorage.setItem("currentPage",t),this.setState({currentPage:JSON.parse(localStorage.getItem("currentPage"))}),this.fetchApi(t)}}},{key:"moveClick",value:function(e){window.scrollTo({top:0,behavior:"smooth"});var t=JSON.parse(localStorage.getItem("currentPage"))+e,a=t;localStorage.setItem("currentPage",t),this.setState({currentPage:localStorage.getItem("currentPage")}),this.fetchApi(a)}},{key:"randomize",value:function(){window.scrollTo({top:0,behavior:"smooth"}),localStorage.removeItem("allFacts"),this.fetchApi()}},{key:"render",value:function(){var e=this.state,t=e.allFacts,a=e.currentPage,c=e.factsPerPage,r=this.state.isLoading?Object(s.jsx)("div",{className:"fact-div",children:Object(s.jsxs)("h3",{className:"loading",children:["Please wait.",Object(s.jsx)("br",{})," The cats are disclosing their secrets."]})}):t.map((function(e,t){return Object(s.jsxs)("div",{className:"fact-div",children:[Object(s.jsxs)("p",{className:"fact-num",children:["Fact # ",t+1+(a-1)*c,":"]}),Object(s.jsx)("p",{className:"fact-txt",children:e.fact})]},t)}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:Object(s.jsx)(j,{error:this.state.error,renderAllFacts:r})}),Object(s.jsx)("div",{children:Object(s.jsx)(m,{data:this,currentPage:this.state.currentPage,state:this.state,lastPage:this.state.lastPage,handleClick:this.handleClick})})]})}}]),a}(r.a.Component),O=a(2);var v=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:Object(s.jsx)(l,{})}),Object(s.jsx)("div",{id:"main-container",children:Object(s.jsx)(b.a,{basename:"/react-tutorial",children:Object(s.jsxs)(O.c,{children:[Object(s.jsx)(O.a,{exact:!0,path:"/",component:p}),Object(s.jsx)(O.a,{path:"/page/:id",component:p})]})})})]})};a(32);i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(v,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.242c06d7.chunk.js.map