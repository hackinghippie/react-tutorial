(this["webpackJsonplucis-react"]=this["webpackJsonplucis-react"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),n=a(4),i=a.n(n),s=a(0);var l=function(){return Object(s.jsxs)("div",{id:"header",children:[Object(s.jsx)("h1",{children:"Cat Facts"}),Object(s.jsx)("h2",{children:"Lucis - React Tutorial"})]})},o=a(5),d=a(6),g=a(2),h=a(8),u=a(7);var j=function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{id:"facts-container",children:[" ",e.error&&Object(s.jsx)("div",{id:"loading",children:Object(s.jsx)("h3",{className:"fact-div",children:e.error})}),e.renderAllFacts]})})};var b=function(e){var t=e.state.apiPaging.slice(1,-1).map((function(t,a){return Object(s.jsx)("button",{id:t.label,url:t.url,onClick:function(t){return e.handleClick(t)},className:(t.active?"mark-page":"")+" "+(null===t.url?"remove-btn":""),children:t.label},a)}));return Object(s.jsxs)("div",{id:"paging",children:[Object(s.jsx)("div",{id:"page-nums",children:t}),Object(s.jsxs)("div",{id:"move-btns",children:[Object(s.jsx)("button",{id:"back-btn",className:1===e.currentPage?"hide":" ",onClick:function(){return e.data.moveClick(-1)},children:Object(s.jsx)("p",{children:"Back"})}),Object(s.jsx)("button",{id:"randomize",onClick:e.data.randomize,children:Object(s.jsx)("p",{children:"Randomize Facts"})}),Object(s.jsx)("button",{id:"next-btn",className:e.lastPage===e.currentPage?"hide":" ",onClick:function(){return e.data.moveClick(1)},children:Object(s.jsx)("p",{children:"Next"})})]})]})},m=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={isLoading:!0,allFacts:[],currentPage:localStorage.getItem("currentPage")||1,factsPerPage:15,error:null,apiPaging:[],newPageUrl:null},e.handleClick=e.handleClick.bind(Object(g.a)(e)),e.moveClick=e.moveClick.bind(Object(g.a)(e)),e.randomize=e.randomize.bind(Object(g.a)(e)),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1,allFacts:JSON.parse(localStorage.getItem("allFacts"))||[],currentPage:localStorage.getItem("currentPage")||1,apiPaging:JSON.parse(localStorage.getItem("apiPaging"))||[]}),this.fetchApi()}},{key:"fetchApi",value:function(){var e=this,t=JSON.parse(this.state.currentPage);fetch("https://catfact.ninja/facts?limit=15&page="+t).then((function(e){if(!e.ok)throw Error("Oh no! There was an error fetching the facts.");return e.json()})).then((function(t){var a=t.data,c=t.last_page,r=t.links,n=localStorage.getItem("currentPage")||1;localStorage.setItem("allFacts",JSON.stringify(a)),localStorage.setItem("apiPaging",JSON.stringify(r)),localStorage.setItem("currentPage",Number(n)),e.setState({isLoading:!1,allFacts:a,currentPage:JSON.parse(localStorage.getItem("currentPage"))||1,error:null,lastPage:c,apiPaging:r})})).catch((function(t){e.setState({error:t.message,isLoading:!1})}))}},{key:"handleClick",value:function(e){if(window.scrollTo({top:0,behavior:"smooth"}),e.target.id>=1){var t=Number(e.target.id);localStorage.setItem("currentPage",t),this.setState({currentPage:JSON.parse(localStorage.getItem("currentPage"))}),this.fetchApi()}}},{key:"moveClick",value:function(e){window.scrollTo({top:0,behavior:"smooth"});var t=JSON.parse(localStorage.getItem("currentPage"))+e;localStorage.setItem("currentPage",t),this.setState({currentPage:localStorage.getItem("currentPage")})}},{key:"randomize",value:function(){window.scrollTo({top:0,behavior:"smooth"}),localStorage.removeItem("allFacts"),this.fetchApi()}},{key:"render",value:function(){var e=this.state,t=e.allFacts,a=e.currentPage,c=e.factsPerPage,r=this.state.isLoading?Object(s.jsx)("div",{className:"fact-div",children:Object(s.jsxs)("h3",{className:"loading",children:["Please wait.",Object(s.jsx)("br",{})," The cats are disclosing their secrets."]})}):t.map((function(e,t){return Object(s.jsxs)("div",{className:"fact-div",children:[Object(s.jsxs)("p",{className:"fact-num",children:["Fact # ",t+1+(a-1)*c,":"]}),Object(s.jsx)("p",{className:"fact-txt",children:e.fact})]},t)}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:Object(s.jsx)(j,{error:this.state.error,renderAllFacts:r})}),Object(s.jsx)("div",{children:Object(s.jsx)(b,{data:this,currentPage:this.state.currentPage,state:this.state,lastPage:this.state.lastPage,handleClick:this.handleClick})})]})}}]),a}(r.a.Component);var O=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:Object(s.jsx)(l,{})}),Object(s.jsx)("div",{id:"main-container",children:Object(s.jsx)(m,{})})]})};a(14);i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2e03bfe3.chunk.js.map